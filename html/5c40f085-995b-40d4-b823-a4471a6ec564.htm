<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Clock Sample</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="5c40f085-995b-40d4-b823-a4471a6ec564" /><meta name="Description" content="The clock sample replicates the behavior of a LCD wrist watch with 3 buttons Mode, Set and Up. It is implemented as a Windows Formshttp://msdn.microsoft.com/en-us/library/dd30h2yb.aspx_blank application." /><meta name="Microsoft.Help.ContentType" content="Samples" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference" tocid="roottoc">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="Developer's Guide" tocid="dee243eb-29a4-4788-9230-540414b1d1f9">Developer's Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c9aa27b0-4173-4bcb-a275-908a0d0f8070.htm" title="Samples" tocid="c9aa27b0-4173-4bcb-a275-908a0d0f8070">Samples</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="7ecae87c-d38a-4a66-9c61-438fd6a25dc9.htm" title=".NET Framework" tocid="7ecae87c-d38a-4a66-9c61-438fd6a25dc9">.NET Framework</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="57f842bf-bcdf-4aff-9720-d0bf87ad5103.htm" title="Simple State Machine Sample .NET Framework" tocid="57f842bf-bcdf-4aff-9720-d0bf87ad5103">Simple State Machine Sample .NET Framework</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="5c40f085-995b-40d4-b823-a4471a6ec564.htm" title="Clock Sample" tocid="5c40f085-995b-40d4-b823-a4471a6ec564">Clock Sample</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="StaMa" src="../icons/StaMa32x32.png" /></td><td class="titleColumn">Clock Sample</td></tr></table><span class="introStyle"></span><div class="introduction"><p>
        The clock sample replicates the behavior of a LCD wrist watch with 3 buttons <span class="ui">Mode</span>, <span class="ui">Set</span> and <span class="ui">Up</span>.
        It is implemented as a <a href="http://msdn.microsoft.com/en-us/library/dd30h2yb.aspx" target="_blank">Windows Forms</a> application.
        Like its original, it needs some fumbling to set the alarm or use the stopwatch.
      </p><div class="mediaCenter"><img alt="Sample Clock User Interface" src="../media/SampleClockUserInterface.png" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Clock sample user interface</div></div><p>
        The bottom text in the application window shows the <a href="P_StaMa_StateMachine_ActiveStateConfiguration.htm">state machine active state</a> as provided through the <a href="M_StaMa_StateConfiguration_ToString.htm">StateConfiguration.ToString</a> method.
      </p><p>
        The central points of the sample are:
      </p><ul><li><p>
            The button pressed events of the <span class="ui">Mode</span>, <span class="ui">Set</span> and <span class="ui">Up</span> buttons trigger different transitions dependent on the state machine active state.
          </p></li><li><p>
            3 orthogonal regions represent the display unit, the stopwatch unit and the alarm unit of the watch.
            They provide a state for the stopwatch and alarm while the display shows something different.
            When the alarm is due, the display is switched to the AlarmDisplay and reverts back to the previous mode inside NormalDisplay through the history function.
          </p></li><li><p>
            The code for setting up the state machine structure and string constants for the states and transitions are generated from <a href="http://office.microsoft.com/visio/" target="_blank">Microsoft Visio</a>.
          </p></li><li><p>
            Usage of state guarded transitions:
            If the display unit of the state machine is in the state StopwatchMode, the outgoing transitions with priority 3 and 4 both react on the <span class="ui">Up</span> button.
            These transitions are active dependent on the state of the stopwatch unit.
            When the stopwatch unit is in state StopwatchStopped, the transition with priority 3 is active through its source state reference to StopwatchStopped.
            When the stopwatch unit is in state StopwatchRunning, the transition with priority 4 is active through its source state reference to StopwatchRunning.
          </p></li></ul><div class="mediaCenter"><img alt="Sample Clock State Machine" src="../media/SampleClockStateMachine.png" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Clock sample state machine</div></div><p>
        The clock sample uses a 10ms <a href="http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx" target="_blank">Windows Forms timer</a> to update the time display in the UI (what a waste!) and an additional array of timers each with 15sec for timeouts of the modes.
      </p><p>
        There are several aspects of Windows Forms usage that should be improved, still the sample shows quite well the <a href="https://StaMa-StateMachine.github.io/" target="_blank">StaMa</a> functionality.
      </p></div></div></div><div id="pageFooter" class="pageFooter">Documentation generated on 28-Mrz-2016  <p><a href="https://github.com/StaMa-StateMachine/StaMa/issues" target="_blank">Report issues at https://github.com/StaMa-StateMachine/StaMa/</a></p></div></body></html>