<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ticket Vending Sample</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="29a68e43-5dbc-4a2c-894e-81a59e9c847b" /><meta name="Description" content="The ticket vending sample demonstrates StaMa https://StaMa-StateMachine.github.io/ running on the Microsoft .NET Micro Framework http://www.netmf.com/ emulator." /><meta name="Microsoft.Help.ContentType" content="Samples" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">StaMa - State Machine Controller Library 2.3.0.2 - Developers Guide and Reference<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="StaMa - State Machine Controller Library 2.3.0.2 - Developers Guide and Reference" tocid="roottoc">StaMa - State Machine Controller Library 2.3.0.2 - Developers Guide and Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="Developer's Guide" tocid="2fe20d49-9cd6-4115-a896-1feb82560840">Developer's Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c9aa27b0-4173-4bcb-a275-908a0d0f8070.htm" title="Samples" tocid="c9aa27b0-4173-4bcb-a275-908a0d0f8070">Samples</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="e703c27a-d129-4c7b-a3d9-880aa839e85a.htm" title=".NET Micro Framework" tocid="e703c27a-d129-4c7b-a3d9-880aa839e85a">.NET Micro Framework</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="ee58caad-02cf-4d26-9b25-033cd452dd77.htm" title="Simple State Machine Sample .NET Micro Framework" tocid="ee58caad-02cf-4d26-9b25-033cd452dd77">Simple State Machine Sample .NET Micro Framework</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="29a68e43-5dbc-4a2c-894e-81a59e9c847b.htm" title="Ticket Vending Sample" tocid="29a68e43-5dbc-4a2c-894e-81a59e9c847b">Ticket Vending Sample</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="StaMa" src="../icons/StaMa32x32.png" /></td><td class="titleColumn">Ticket Vending Sample</td></tr></table><span class="introStyle"></span><div class="introduction"><p>
        The ticket vending sample demonstrates <a href="https://StaMa-StateMachine.github.io/" target="_blank">StaMa</a> running on the Microsoft <a href="http://www.netmf.com/" target="_blank">.NET Micro Framework</a> emulator.
      </p><p>
        As with real ticket vending machines, the usage of the vending machine is intricate.
        The introduction text on the left side screenshot below explains how to use the buttons to fetch something out of the machine. Good luck!
      </p><div class="mediaCenter"><img alt="Sample Ticket Vending Emulator" src="../media/SampleTicketVendingEmulator.png" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Startup and idle state of the ticket vending sample user interface</div></div><p>
        The central points of the sample are:
      </p><ul><li><p>
            The button pressed events of the <span class="ui">UP</span>, <span class="ui">DOWN</span>, <span class="ui">SELECT</span> and <span class="ui">RIGHT</span> buttons trigger different transitions dependent on the state machine active state.
            <span class="ui">UP</span> and <span class="ui">DOWN</span> iterate through the selected list (either <span class="ui">Destination</span> or <span class="ui">Coin</span>), <span class="ui">SELECT</span> executes an action and <span class="ui">RIGHT</span> cancels.
          </p></li><li><p>
            In the implementation there is a single exit action <span class="code">ExitEmitRequired</span> of the composite state <span class="code">EmitRequired</span> which ensures that the vending machine delivers in any case either the inserted money or the product or the product and change pair.
          </p></li><li><p>
            The code for setting up the state machine structure and string constants for the states and transitions are generated from <a href="http://office.microsoft.com/visio/" target="_blank">Microsoft Visio</a>.
          </p></li><li><p>
            Timeouts are implemented through <a href="http://msdn2.microsoft.com/en-us/library/bb329253" target="_blank">Microsoft.SPOT.DispatcherTimer</a> instances.
          </p></li></ul><div class="mediaCenter"><img alt="Sample Ticket Vending State Machine" src="../media/SampleTicketVendingStateMachine.png" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Ticket vending sample state machine</div></div></div></div></div><div id="pageFooter" class="pageFooter">Documentation generated on 28-Mrz-2016  <p><a href="https://github.com/StaMa-StateMachine/StaMa/issues" target="_blank">Report issues at https://github.com/StaMa-StateMachine/StaMa/</a></p></div></body></html>