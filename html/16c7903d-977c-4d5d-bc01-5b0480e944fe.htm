<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tracing State Changes, Transition Testing and Event Dispatching</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="16c7903d-977c-4d5d-bc01-5b0480e944fe" /><meta name="Description" content="Explains how to monitor what is going on in the state machine when events are sent to the state machine" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">StaMa - State Machine Controller Library 2.3.0.9 - Developers Guide and Reference<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="StaMa - State Machine Controller Library 2.3.0.9 - Developers Guide and Reference" tocid="roottoc">StaMa - State Machine Controller Library 2.3.0.9 - Developers Guide and Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="Developer's Guide" tocid="e7c73e28-6895-434e-8239-2a4d98590529">Developer's Guide</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="ae34a73e-1561-4b10-ab33-a7564f4026e7.htm" title="Integrating the State Machine with the Application" tocid="ae34a73e-1561-4b10-ab33-a7564f4026e7">Integrating the State Machine with the Application</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="a02f7e6a-627a-44f5-a250-52c62339f6f5.htm" title="Event Driven and Scan Cycle Driven State Machines" tocid="a02f7e6a-627a-44f5-a250-52c62339f6f5">Event Driven and Scan Cycle Driven State Machines</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="a8e4100d-7357-49b1-80c8-7960bb51e540.htm" title="Error and Exception Handling" tocid="a8e4100d-7357-49b1-80c8-7960bb51e540">Error and Exception Handling</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="16c7903d-977c-4d5d-bc01-5b0480e944fe.htm" title="Tracing State Changes, Transition Testing and Event Dispatching" tocid="16c7903d-977c-4d5d-bc01-5b0480e944fe">Tracing State Changes, Transition Testing and Event Dispatching</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="A98FB6B4-A211-412D-9D81-1DFF5695DDE9.htm" title="Persistence of State Machines" tocid="A98FB6B4-A211-412D-9D81-1DFF5695DDE9">Persistence of State Machines</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="StaMa" src="../icons/StaMa32x32.png" /></td><td class="titleColumn">Tracing State Changes, Transition Testing and Event Dispatching</td></tr></table><span class="introStyle"></span><div class="summary"><p>Explains how to monitor what is going on in the state machine when events are sent to the state machine</p></div><div class="introduction"><p>
        In a sense a state machine is a black box that receives events and executes actions in response to the events.
        Although the rules are clearly defined what shall happen in case an event is sent to the state machine, it can sometimes turn out as complex to figure out what is actually going on in a non-trivial state machine.
      </p><p><a href="https://StaMa-StateMachine.github.io/" target="_blank">StaMa</a> provides a few hooks in the state machine execution algorithm that assist tracking the current state and the progress of evaluation of the events sent to the state machine.
      </p><p>
        All hooks are solely intended to provide tracing and debug information.
        They shall never send events to the state machine or change any data evaluated within guard conditions.
      </p><p> </p></div><div class="collapsibleAreaRegion" id="TraceStateChangeEventHandler"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Tracing State Changes</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          Set the <a href="P_StaMa_StateMachine_TraceStateChange.htm">StateMachine.TraceStateChange</a> property to track whenever
          the <a href="P_StaMa_StateMachine_ActiveStateConfiguration.htm">active state</a> of a <a href="T_StaMa_StateMachine.htm">StateMachine</a> instance changes.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABADAAA_tab1" class="codeSnippetContainerTabSingle">TraceStateChange callback implementation</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABADAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EABADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">private</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">void</span> TraceStateChange(StateMachine stateMachine, StateConfiguration stateConfigurationFrom, StateConfiguration stateConfigurationTo, Transition transition)
{
    <span class="highlight-keyword">string</span> info = <span class="highlight-literal">"ActiveState=\""</span> + stateConfigurationTo.ToString() + <span class="highlight-literal">"\""</span> + <span class="highlight-literal">" Transition="</span> + ((transition != <span class="highlight-keyword">null</span>) ? <span class="highlight-literal">"\""</span> + transition.Name + <span class="highlight-literal">"\""</span> : <span class="highlight-literal">"Startup/Finish"</span>);
    System.Console.WriteLine(info);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABADAAA");</script><p> </p></div><div class="collapsibleAreaRegion" id="TraceDispatchTriggerEventEventHandler"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Tracing When Events Are Dequeued and What the Run to Completion Execution Does</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          Set the <a href="P_StaMa_StateMachine_TraceDispatchTriggerEvent.htm">StateMachine.TraceDispatchTriggerEvent</a> property to track whenever
          the state machine fetches an event instance from the queue as part of the run-to-completion processing and dispatches it to the state machine algorithm.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABACAAA_tab1" class="codeSnippetContainerTabSingle">TraceDispatchTriggerEvent callback implementation</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EABACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">private</span> <span class="highlight-keyword">void</span> TraceDispatchTriggerEvent(StateMachine stateMachine, <span class="highlight-keyword">object</span> triggerEvent, EventArgs eventArgs)
{
    String message = String.Format(<span class="highlight-literal">"Dispatch event {0} in state {1}"</span>,
                                   (triggerEvent != <span class="highlight-keyword">null</span>) ? triggerEvent.ToString() : <span class="highlight-literal">"*"</span>,
                                   stateMachine.ActiveStateConfiguration.ToString());
    System.Console.WriteLine(info);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABACAAA");</script><p> </p></div><div class="collapsibleAreaRegion" id="TraceTestTransitionEventHandler"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Tracing Which Transitions Are Tested While an Event Is Evaluated by the State Machine</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          Set the <a href="P_StaMa_StateMachine_TraceTestTransition.htm">StateMachine.TraceTestTransition</a> property to track whenever
          the state machine reached a transition and will test if the transition can be executed.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABAAA_tab1" class="codeSnippetContainerTabSingle">TraceTestTransition callback implementation</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">private</span> <span class="highlight-keyword">void</span> TraceTestTransition(StateMachine stateMachine, Transition transition, <span class="highlight-keyword">object</span> triggerEvent, EventArgs eventArgs)
{
    String message = String.Format(<span class="highlight-literal">"Test transition {0} with event {1} in state {2}"</span>,
                                   transition.ToString(),
                                   (triggerEvent != <span class="highlight-keyword">null</span>) ? triggerEvent.ToString() : <span class="highlight-literal">"*"</span>,
                                   stateMachine.ActiveStateConfiguration.ToString());
    System.Console.WriteLine(info);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABAAA");</script></div></div></div><div id="pageFooter" class="pageFooter">Documentation generated on 22-Apr-2016  <p><a href="https://github.com/StaMa-StateMachine/StaMa/issues" target="_blank">Report issues at https://github.com/StaMa-StateMachine/StaMa/</a></p></div></body></html>