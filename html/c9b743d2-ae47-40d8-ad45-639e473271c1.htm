<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Add a State to a State Diagram and Control Its Generated Code Using StaMa Visio Shapes</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="c9b743d2-ae47-40d8-ad45-639e473271c1" /><meta name="Description" content="Explains how to add a state to a StaMa Visio Shapes state diagram and control the code generated for the state." /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference" tocid="roottoc">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="Developer's Guide" tocid="7953145f-79aa-45fb-af3b-94cc26ebf94e">Developer's Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="ca217c97-dd3c-4c6c-a0e7-5893315663aa.htm" title="Using Visio Shapes" tocid="ca217c97-dd3c-4c6c-a0e7-5893315663aa">Using Visio Shapes</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d84688d1-ab43-4437-b9fe-aeecc03b5d0e.htm" title="Step by Step Descriptions for Tasks" tocid="d84688d1-ab43-4437-b9fe-aeecc03b5d0e">Step by Step Descriptions for Tasks</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b118384c-7479-4dd8-82e8-18e9a13b35f6.htm" title="Create a Basic State Diagram and Generate Code from It" tocid="b118384c-7479-4dd8-82e8-18e9a13b35f6">Create a Basic State Diagram and Generate Code from It</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="c9b743d2-ae47-40d8-ad45-639e473271c1.htm" title="Add a State to a State Diagram and Control Its Generated Code" tocid="c9b743d2-ae47-40d8-ad45-639e473271c1">Add a State to a State Diagram and Control Its Generated Code</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="1b54bfbf-f269-4c50-8695-8ff430dee73b.htm" title="Create a Plain Transition and Control Its Generated Code " tocid="1b54bfbf-f269-4c50-8695-8ff430dee73b">Create a Plain Transition and Control Its Generated Code </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="2879867d-8e74-4dbd-861a-292bc54d505b.htm" title="Generate Code for Enumerations of States, Signal Events and Actions" tocid="2879867d-8e74-4dbd-861a-292bc54d505b">Generate Code for Enumerations of States, Signal Events and Actions</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="9d4e9992-3c8d-49a8-9818-18f5d488af7e.htm" title="Create a Composite State" tocid="9d4e9992-3c8d-49a8-9818-18f5d488af7e">Create a Composite State</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="9110ef28-d0d9-40ac-a09d-2263809f5f45.htm" title="Add a Second, Orthogonal Region to a Composite State" tocid="9110ef28-d0d9-40ac-a09d-2263809f5f45">Add a Second, Orthogonal Region to a Composite State</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="6ac8c54b-c9fa-4085-80f9-b816430ae62d.htm" title="Create a Fork Transition" tocid="6ac8c54b-c9fa-4085-80f9-b816430ae62d">Create a Fork Transition</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="5a2e1160-ce69-4b22-97fe-bf986343fd1e.htm" title="Create a Join Transition" tocid="5a2e1160-ce69-4b22-97fe-bf986343fd1e">Create a Join Transition</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f3839c42-ee1f-4437-b495-b9522ba6d024.htm" title="Revert a Composite State Back to a Basic State" tocid="f3839c42-ee1f-4437-b495-b9522ba6d024">Revert a Composite State Back to a Basic State</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="StaMa" src="../icons/StaMa32x32.png" /></td><td class="titleColumn">Add a State to a State Diagram and Control Its Generated Code Using StaMa Visio Shapes</td></tr></table><span class="introStyle"></span><div class="summary"><p>
        Explains how to add a state to a <a href="ca217c97-dd3c-4c6c-a0e7-5893315663aa.htm">StaMa Visio Shapes</a> state diagram and control the code generated for the state.
      </p></div><div class="introduction"><p>
        States are added to a state diagram by draging and dropping the state shape from the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> to a region in the state diagram.
      </p><p>
        See also <a href="b118384c-7479-4dd8-82e8-18e9a13b35f6.htm">Create a Basic State Diagram and Generate Code from It</a>.
      </p></div><h3 class="procedureSubHeading">Adding the state</h3><div class="subSection"><ol><li><p>
              In the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> locate the <span class="ui">State</span> shape and drag it over a region on the state diagram. The border of the region changes its appearance.
            </p><div class="mediaCenter"><img alt="Create State Drag Changes Region Border" src="../media/CreateStateDragChangesRegionBorder.png" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Dragging the new state into the region accentuates the region border</div></div></li><li><p>
              Hover over the regions in the state diagram to select the desired region. Drop the state shape. A properties dialog <span class="ui">Shape data</span> appears.
            </p><div class="mediaCenter"><img alt="Create State Ask Name Dialog" src="../media/CreateStateAskNameDialog.png" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Create state asks for name</div></div></li><li><p>
              Enter the state name and press <span class="ui">OK</span>.
            </p></li><li><p>
              Generate the code into the <span class="placeholder">target file</span> e.g. by pressing <span class="ui">Ctrl+G</span>.
              Check that the new State has been added to the <span class="placeholder">target file</span>.
            </p></li></ol><p>

            You can drag the state within the region. The border of the region will change its appearance when the state is moved outside of the region.
          </p></div><h3 class="procedureSubHeading">Renaming the State</h3><div class="subSection"><ol><li><p>
              Locate the state name in the diagram and double click in this area. The <span class="ui">Shape data</span> properties dialog of the state appears.
            </p><div class="mediaCenter"><img alt="State Properties" src="../media/StateProperties.png" /><div class="caption"><span class="captionLead">Figure 3:
						</span>State properties dialog</div></div></li><li><p>
              Change the <span class="ui">Name</span> field and press <span class="ui">OK</span> to close the dialog.
              The state name in the diagram changes and the width of the state is adapted to the new name.
            </p></li><li><p>
              Generate the code into the <span class="placeholder">target file</span> e.g. by pressing <span class="ui">Ctrl+G</span>.
              Check that the new State has been added to the <span class="placeholder">target file</span>.
            </p></li></ol><p>

            You can change the sort order of the states in the generated code by changing the <span class="ui">Sort Order</span> field in the above <span class="ui">Shape data</span> properties dialog.
            States are generated according to the alphabetical order of the field values in their <span class="ui">Sort Order</span> field.
          </p></div><h3 class="procedureSubHeading">Setting Entry and Exit Actions</h3><div class="subSection"><ol><li><p>
              Locate the state name in the diagram and double click in this area. The <span class="ui">Shape data</span> properties dialog of the state appears.
            </p></li><li><p>
              Change the <span class="ui">Entry Action</span> and/or the <span class="ui">Exit Action</span> field and press <span class="ui">OK</span> to close the dialog.
              The <span class="ui">entry /</span> and/or <span class="ui">exit /</span> description in the diagram changes and the width of the state is adapted to the content.
            </p></li><li><p>
              Generate the code into the <span class="placeholder">target file</span> e.g. by pressing <span class="ui">Ctrl+G</span>.
              Check that the new State has been updated properly in the <span class="placeholder">target file</span>.
            </p></li></ol><p>
            The contents of the <span class="ui">Entry Action</span> and <span class="ui">Exit Action</span> field are usually speaking method names of the embedding class of the state machine.
            However anonymous delegates or lambda expressions are also valid content for the fields and may be perfectly reasonable for some applications.
          </p></div><h3 class="procedureSubHeading">Changing the Location of the State in the Generated Code Relative to the Other State</h3><div class="subSection"><ol><li><p>
              Locate the state name in the diagram and double click in this area. The <span class="ui">Shape data</span> properties dialog of the state appears.
            </p></li><li><p>
              The code generator creates the states ordered alphabetically according to the values in the <span class="ui">Sort Order</span> field.
              Considering the <span class="ui">Sort Order</span> field values of the other states in the same region, choose a reasonable value for this state and enter it to the <span class="ui">Sort Order</span> field of the dialog.
            </p></li><li><p>
              Generate the code into the <span class="placeholder">target file</span> e.g. by pressing <span class="ui">Ctrl+G</span>.
              Check that the new State has the desired relative location in the <span class="placeholder">target file</span>.
            </p></li></ol><p>

            Numeric values may be a perfect choice for the <span class="ui">Sort Order</span> field, however please consider they are also sorted alphabetically.
            The <span class="ui">Sort Order</span> field value itself is not written into the generated code.
          </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID0RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="298801d3-40ad-4fae-816e-5a7e1afb0ff0.htm">Programming State Machines</a></div></div></div></div><div id="pageFooter" class="pageFooter">Documentation generated on 22-Apr-2016  <p><a href="https://github.com/StaMa-StateMachine/StaMa/issues" target="_blank">Report issues at https://github.com/StaMa-StateMachine/StaMa/</a></p></div></body></html>