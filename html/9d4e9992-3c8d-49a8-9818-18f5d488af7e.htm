<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create a Composite State Using StaMa Visio Shapes</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="9d4e9992-3c8d-49a8-9818-18f5d488af7e" /><meta name="Description" content="Explains how to convert a simple state into a composite state in a StaMa Visio Shapes state diagram." /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference" tocid="roottoc">StaMa - State Machine Controller Library 2.3.0.3 - Developers Guide and Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d3287120-e3fa-45ed-8986-ba6d78244c1c.htm" title="Developer's Guide" tocid="dee243eb-29a4-4788-9230-540414b1d1f9">Developer's Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="ca217c97-dd3c-4c6c-a0e7-5893315663aa.htm" title="Using Visio Shapes" tocid="ca217c97-dd3c-4c6c-a0e7-5893315663aa">Using Visio Shapes</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d84688d1-ab43-4437-b9fe-aeecc03b5d0e.htm" title="Step by Step Descriptions for Tasks" tocid="d84688d1-ab43-4437-b9fe-aeecc03b5d0e">Step by Step Descriptions for Tasks</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b118384c-7479-4dd8-82e8-18e9a13b35f6.htm" title="Create a Basic State Diagram and Generate Code from It" tocid="b118384c-7479-4dd8-82e8-18e9a13b35f6">Create a Basic State Diagram and Generate Code from It</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="c9b743d2-ae47-40d8-ad45-639e473271c1.htm" title="Add a State to a State Diagram and Control Its Generated Code" tocid="c9b743d2-ae47-40d8-ad45-639e473271c1">Add a State to a State Diagram and Control Its Generated Code</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="1b54bfbf-f269-4c50-8695-8ff430dee73b.htm" title="Create a Plain Transition and Control Its Generated Code " tocid="1b54bfbf-f269-4c50-8695-8ff430dee73b">Create a Plain Transition and Control Its Generated Code </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="2879867d-8e74-4dbd-861a-292bc54d505b.htm" title="Generate Code for Enumerations of States, Signal Events and Actions" tocid="2879867d-8e74-4dbd-861a-292bc54d505b">Generate Code for Enumerations of States, Signal Events and Actions</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="9d4e9992-3c8d-49a8-9818-18f5d488af7e.htm" title="Create a Composite State" tocid="9d4e9992-3c8d-49a8-9818-18f5d488af7e">Create a Composite State</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="9110ef28-d0d9-40ac-a09d-2263809f5f45.htm" title="Add a Second, Orthogonal Region to a Composite State" tocid="9110ef28-d0d9-40ac-a09d-2263809f5f45">Add a Second, Orthogonal Region to a Composite State</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="6ac8c54b-c9fa-4085-80f9-b816430ae62d.htm" title="Create a Fork Transition" tocid="6ac8c54b-c9fa-4085-80f9-b816430ae62d">Create a Fork Transition</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="5a2e1160-ce69-4b22-97fe-bf986343fd1e.htm" title="Create a Join Transition" tocid="5a2e1160-ce69-4b22-97fe-bf986343fd1e">Create a Join Transition</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f3839c42-ee1f-4437-b495-b9522ba6d024.htm" title="Revert a Composite State Back to a Basic State" tocid="f3839c42-ee1f-4437-b495-b9522ba6d024">Revert a Composite State Back to a Basic State</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="StaMa" src="../icons/StaMa32x32.png" /></td><td class="titleColumn">Create a Composite State Using StaMa Visio Shapes</td></tr></table><span class="introStyle"></span><div class="summary"><p>
        Explains how to convert a simple state into a composite state in a <a href="ca217c97-dd3c-4c6c-a0e7-5893315663aa.htm">StaMa Visio Shapes</a> state diagram.
      </p></div><div class="introduction"><p>
        Composite states contain orthogonal sub-regions, at least one. Sub-regions in turn contain states just like the root region.
        Through this double step recursion it is possible to create an arbitrary deep nested hierarchy of states.
      </p><p>
        This nesting hierarchy of a state machine is reproduced with <a href="ca217c97-dd3c-4c6c-a0e7-5893315663aa.htm">StaMa Visio Shapes</a> through the concept that the region shape is a grouping container for states and the state is a group container for regions.
        Regions are represented by the region shape, which is a group container that can contain multiple states.
      </p><div class="mediaCenter"><img alt="Region Containing Simple State" src="../media/RegionContainingSimpleState.png" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Region containing a single simple state that is marked as the initial state</div></div><p>
        States are represented through the state shape which is usually a simple state but can be converted to a composite state that can contain one or more sub-regions.
      </p><div class="mediaCenter"><img alt="Composite State Containing One Region" src="../media/CompositeStateContainingOneRegion.png" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Composite state with a sub-region containing a simple state that is marked as the initial state</div></div><p>
        Please notice the graphical similarity of <em>Figure 1</em> with the contents of the <span class="ui">CompositeState</span> in <em>Figure 2</em>.
        Essentially these contents are created by adding the same graphical objects as in <em>Figure 1</em> into a <a href="http://office.microsoft.com/visio/" target="_blank">Microsoft Visio</a> group object that is made available through the embedding state.
      </p></div><h3 class="procedureSubHeading">Converting the Simple State Shape to a Composite State Shape</h3><div class="subSection"><ol><li><p>
              Convert the simple state into a group container that can accept sub-regions:
            </p><p>
              Locate the simple state in the state diagram.
              Make sure there is some blank space below and to the right of the state.
            </p><p>
              Open the context menu of the state e.g. by right clicking the state and execute the menu item <span class="ui">Convert to Composite State...</span>.
              The simple state expands its size and provides now an inner area.
              When the state is selected, it can now be resized by dragging the selection handles.
            </p></li><li><p>
              Add a region to the composite state:
            </p><p>
              Open the context menu of the state e.g. by right clicking the state and execute the menu item <span class="ui">Configure Sub-Regions...</span>.
              A new window opens containing an empty drawing area.
            </p><div class="mediaCenter"><img alt="Composite State Config Sub Regions Empty" src="../media/CompositeStateConfigSubRegionsEmpty.png" /><div class="caption"><span class="captionLead">Figure 3:
						</span>Configure sub-regions window</div></div><p>
              The window represents the contents of composite state.
              Arrange the new window so that both the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> and the new window are visible in the <a href="http://office.microsoft.com/visio/" target="_blank">Microsoft Visio</a> application.
            </p><p>
              In the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> locate the <span class="ui">Region</span> shape and drag and drop it to the contents window of the composite state.
            </p><div class="mediaCenter"><img alt="Composite State Config Sub Regions Dropped" src="../media/CompositeStateConfigSubRegionsDropped.png" /><div class="caption"><span class="captionLead">Figure 4:
						</span>Sub-region of composite state dropped</div></div><p>
              Resize the dropped region shape to exactly match the size of the entire drawing area.
            </p><div class="mediaCenter"><img alt="Composite State Config Sub Regions Aligned" src="../media/CompositeStateConfigSubRegionsAligned.png" /><div class="caption"><span class="captionLead">Figure 5:
						</span>Second sub-region of composite state aligned</div></div><p>
              Close the configure sub-regions window of the composite state.
            </p></li><li><p>
              Add a simple state to the composite state:
            </p><p>
              Drag a <span class="ui">State</span> shape from the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> to the composite state and drop it as described in <a href="c9b743d2-ae47-40d8-ad45-639e473271c1.htm">Add a State to a State Diagram and Control Its Generated Code</a>.
            </p><div class="mediaCenter"><img alt="Composite State Containing One Region Drag State" src="../media/CompositeStateContainingOneRegionDragState.png" /><div class="caption"><span class="captionLead">Figure 6:
						</span>Dragging the state into the sub-region. Region border changes appearance</div></div></li><li><p>
              Define the newly added simple state as the initial state of the region:
            </p><p>
              In the <a href="a4db1100-01f4-4594-b23c-948cbd01b5e7.htm">Document Stencil</a> locate the <span class="ui">Transition Segment</span> shape and drag it over the border of the simple state in the composite state.
              Drag the line end of the transition segment with the arrow over the target state border until a small red rectangle appears on the source state.
              Drop the transition segment shape.
            </p></li><li><p>
              Convert the transition segment to an initial state marker:
            </p><p>
              Double click the transition segment. The <span class="ui">Shape data</span> properties dialog of the transition segment appears.
              In the <span class="ui">Segment Type</span> combo box select <span class="ui">Initial state</span>.
            </p><div class="mediaCenter"><img alt="Transition Segment Properties" src="../media/TransitionSegmentShapeProperties.png" /><div class="caption"><span class="captionLead">Figure 7:
						</span>Transition segment properties dialog</div></div><p>
              Press <span class="ui">OK</span> to close the dialog.
            </p></li><li><p>
              Generate the code into the <span class="placeholder">target file</span> e.g. by pressing <span class="ui">Ctrl+G</span>.
              Verify that in the <span class="placeholder">target file</span> the composite state has a sub-region and adresses the simple state in the sub-region as the initial state.
            </p><p>
              The <span class="placeholder">target file</span> can be opened through the <span class="ui">Open Target File</span> context menu item of the code generator shape and will be opened in the operating system default editor.
            </p></li></ol><p>
            The composite state now contains one sub-region that can host states.
            Add simple states to the composite state through drag and drop as described in <a href="c9b743d2-ae47-40d8-ad45-639e473271c1.htm">Add a State to a State Diagram and Control Its Generated Code</a>.
            It is not neccessary to open the contents window of the composite state except for adding another sub-region.
          </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID0RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="182b6093-fb30-4549-90d3-addc7c2dd2fb.htm">Composite States</a></div></div></div></div><div id="pageFooter" class="pageFooter">Documentation generated on 28-Mrz-2016  <p><a href="https://github.com/StaMa-StateMachine/StaMa/issues" target="_blank">Report issues at https://github.com/StaMa-StateMachine/StaMa/</a></p></div></body></html>